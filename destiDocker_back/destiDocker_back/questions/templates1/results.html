<h1>The Results</h1>

{% for country, cities in data_continents.items %}
    <h2 class="country-title" style="cursor: pointer;">{{ country }}</h2>
    <div class="city-info" style="display: none;">
        {% if cities %}
            {% for city in cities %}
                <h3><a href="{% url 'flights' country city.name %}" onclick="event.preventDefault(); document.getElementById('flights-form-{{ forloop.counter }}').submit();">City: {{ city.name }}</a></h3>
                <p>Population: {{ city.population }}</p>
                <form id="flights-form-{{ forloop.counter }}" method="post" action="{% url 'flights' country city.name %}">
                    {% csrf_token %}
                    <input type="hidden" name="departureDate" value="{{ request.session.departure_date }}">
                    <input type="hidden" name="departureCity" value="{{ request.session.departure_city }}">
                    <input type="hidden" name="arrivalIATA" value="{{ city.iata_code }}">
                </form>
            {% endfor %}
        {% else %}
            <p>No cities found</p>
        {% endif %}
    </div>
{% endfor %}

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
$(document).ready(function() {
    $('.country-title').click(function() {
        $(this).next('.city-info').slideToggle();
    });
});
</script>
